<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Studi Kasus MTU | Ter-noted</title><meta name=keywords content><meta name=description content="Replikasi kasus koneksi HTTPS &ldquo;nyangkut&rdquo; yang diakibatkan oleh MTU"><meta name=author content="Ilham Wahayu Yanre"><link rel=canonical href=http://localhost:1313/posts/network/studi-kasus-mtu/><meta name=google-site-verification content="t-zfRcTeMVpKz-zJZ4kAapCmfthCxad2xD9RS7KqRW0"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="8F4356E9790CB1DA67495F1E3A1012B3"><link crossorigin=anonymous href=/assets/css/stylesheet.36819bea596090d8b48cf10d9831382996197aa7e4fc86f792f7c08c9ca4d23b.css integrity="sha256-NoGb6llgkNi0jPENmDE4KZYZeqfk/Ib3kvfAjJyk0js=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/network/studi-kasus-mtu/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/posts/network/studi-kasus-mtu/"><meta property="og:site_name" content="Ter-noted"><meta property="og:title" content="Studi Kasus MTU"><meta property="og:description" content="Replikasi kasus koneksi HTTPS “nyangkut” yang diakibatkan oleh MTU"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-03T10:56:21+07:00"><meta property="article:modified_time" content="2025-08-03T10:56:21+07:00"><meta property="og:image" content="http://localhost:1313/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/cover.png"><meta name=twitter:title content="Studi Kasus MTU"><meta name=twitter:description content="Replikasi kasus koneksi HTTPS &ldquo;nyangkut&rdquo; yang diakibatkan oleh MTU"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Network","item":"http://localhost:1313/posts/network/"},{"@type":"ListItem","position":3,"name":"Studi Kasus MTU","item":"http://localhost:1313/posts/network/studi-kasus-mtu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Studi Kasus MTU","name":"Studi Kasus MTU","description":"Replikasi kasus koneksi HTTPS \u0026ldquo;nyangkut\u0026rdquo; yang diakibatkan oleh MTU","keywords":[],"articleBody":"Pernah mengalami kendala jaringan di mana koneksi client ke HTTPS server “nyangkut” secara random, padahal HTTP normal, firewall blocking tidak ada, port checking juga aman? Bisa jadi masalahnya ada pada MTU.\nBeberapa waktu lalu saya dihadapkan dengan isu jaringan yang belum pernah saya temui sebelumnya. Di mana curl dari client ke server menggunakan HTTP aman, akan tetapi curl menggunakan HTTPS malah nyangkut lumayan lama sampai connection reset. Analisa saya, jika HTTP saja bisa, artinya tidak ada masalah pada layer 3 dong antara client dan server. Check port 80 dan 443 dari client ke server pun statusnya juga open, jadi layer 4 pun seharusnya juga aman kan? Akan tetapi ICMP server mati sehingga server tidak bisa di-probe. Selanjutnya saya coba curl HTTPS ke server menggunakan jaringan lain, ternyata bisa. Artinya masalah ini hanya terjadi di jaringan yang saya gunakan, bukan faktor server atau perangkat client.\nSetelah mencari-cari jawaban di internet, saya menemukan solusi untuk menurunkan MTU pada perangkat client. Setelah menurunkan MTU dari 1500 (default) ke 1400 pada perangkat client, curl HTTPS ke server pun langsung bisa. Permasalahan teratasi, namun rasa penasaran saya makin menjadi-jadi.\nSetelah menganalisa lebih lanjut, Alhamdulillah akhirnya saya berhasil memahami teknis permasalahan tersebut.\nTL;DR Masalah ini terjadi karena ada perbedaan nilai MTU dari jalur yang dilewati trafik antara client-server, ICMP pada server mati sehingga PMTUD tidak berfungsi, dan jalur trafik antar client-server yang asimetris. Jaringan client memiliki beberapa koneksi BGP ke upstream yang berbeda-beda. Trafik dari client ke server melewati BGP A, akan tetapi kembali lewat BGP B. BGP B terhubung ke upstream menggunakan EoIP. MTU dari EoIP adalah 1458, karena 42 bytes dipakai untuk EoIP encapsulation. Jadi ketika client-server melakukan TCP handshake, maka MSS client yang diterima server adalah 1460 karena melewati BGP A, sedangkan MSS server yang diterima client adalah 1418 karena dipangkas oleh EoIP interface BGP B. Karena MSS client yang diterima server adalah 1460, maka server akan mengirim data dengan MSS 1460 juga. Padahal data dengan MSS 1460 tidak bisa melewati jalur BGP B yang MTU-nya hanya 1458. Lalu karena ICMP server dimatikan, Router BGP B pun tidak bisa memberi tahu server menggunakan PMTUD bahwa ukuran data yang dia kirim harus disesuaikan dengan MTU si Router, protocol yang memanfaatkan ICMP. Jadi ketika server mengirimkan data dengan MSS 1460, maka data ini akan di-drop oleh Router BGP B sehingga koneksinya akan “nyangkut”. Makanya ketika MTU client diturunkan menjadi 1400, koneksi client-server kembali normal. Karena MSS client yang dikirim ke server juga akan lebih kecil.\nSebelum kita mereplikasi kasus tersebut menggunakan GNS3, mari kita jelaskan terlebih dahulu istilah MTU, MSS, PMTUD yang kita singgung di atas.\nApa itu MTU (Maximum Transmission Unit) dan MSS (Maximum Segment Size)? MTU adalah jumlah maksimum data dalam bentuk bytes yang bisa ditransmisikan dalam 1 packet, yang default-nya adalah 1500 bytes. Dalam packet terdapat IP Header, TCP Header, dan payload. Jika data ini melebihi ukuran MTU, maka akan terjadi IP fragmentation apabila flag DF=0. Artinya data tersebut akan dibagi menjadi beberapa packet. Tapi jika flag DF=1, artinya packet tersebut tidak boleh difragmentasi sehingga packet tersebut akan di drop dan pengirim akan menerima pesan ICMP Fragmentation needed. Lalu pengirim akan mengirim ulang packet tersebut dengan ukuran yang disesuaikan.\nDi dalam packet terdapat IP Header, TCP Header, dan payload. Ukuran maksimum payload inilah yang disebut dengan MSS. Jadi packet dengan ukuran 1500 bytes terdiri dari 20 bytes IP Header + 20 bytes TCP Header + 1460 payload. MSS ini akan saling diinformasikan oleh client-server ketika melakukan TCP handshake. Makanya EoIP interface dengan MTU 1458 hanya bisa dilewati oleh packet dengan MSS 1418, karena 40 bytes nya adalah IP Header dan TCP Header.\nApa itu PMTUD (Path MTU Discovery)? PMTUD adalah mekanisme yang digunakan pengirim data (client atau server) untuk mengetahui nilai MTU terkecil pada router atau perangkat layer 3 yang akan dilewatinya untuk mencapai tujuan. Tujuannya agar pengirim bisa menyesuaikan ukuran packet yang akan dikeluarkannya agar “muat” ketika melewati jalur ke tujuannya. Tujuan lainnya adalah agar tidak terjadi IP fragmentation. Secara default IP fragmentation tidak diizinkan (DF=1) karena IP fragmentation sangat membebani performa jaringan. PMTUD memanfaatkan ICMP. Jadi jika ICMP dimatikan, maka PMTUD juga ikut mati.\nContoh Use Case PMTUD\rClient mengirim packet ke Server melewati Router A,B,C dengan ukuran 1500 bytes, dan flag DF=1. Router C memiliki MTU 1400. Ketika packet sampai ke Router C, Router C akan men-drop packet tersebut dan mengirim pesan ICMP “Fragmentation Needed” ke client yang memuat informasi MTU pada Router tersebut. Client menerima pesan ICMP tersebut dan mengirim ulang packet dengan menyesuaikan ukurannya dengan MTU Router C.\nApabila Client mengirim packet sebesar 1500 bytes dengan DF=0, lalu packet melewati Router C. Maka Router C akan memfragmentasi packet tersebut tanpa memberitahu pengirim.\nSimulasi GNS3 Topologi didesain agar trafik antara Client dan Server selalu melewati jalur yang berbeda (asimetris) Client dan server menggunakan cloud-ubuntu-24.04 IP client 10.0.0.2, IP server 99.99.99.98 Server dibuat menjadi HTTPS server untuk mensimulasikan curl dari client Router menggunakan Mikrotik CHR 7.19.4 Fokus dari pembahasan ini adalah behavior dari MTU. Jadi untuk konfigurasi setupnya tidak dibahas di sini. Trafik pada interface client dan server akan dimonitor menggunakan wireshark Gambar 1. Topologi\rSimulasi 1. Keadaan Normal Pada simulasi pertama kita akan mencoba melakukan curl ke HTTPS server dari client. Kemudian kita akan memantau melalui wireshark apa saja yang terjadi ketika kita melakukan curl.\nubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure\rubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure * Trying 99.99.99.98:443... * Connected to 99.99.99.98 (99.99.99.98) port 443 * ALPN: curl offers h2,http/1.1 * TLSv1.3 (OUT), TLS handshake, Client hello (1): * TLSv1.3 (IN), TLS handshake, Server hello (2): * TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8): * TLSv1.3 (IN), TLS handshake, Certificate (11): * TLSv1.3 (IN), TLS handshake, CERT verify (15): * TLSv1.3 (IN), TLS handshake, Finished (20): * TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1): * TLSv1.3 (OUT), TLS handshake, Finished (20): * SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS * ALPN: server accepted http/1.1 * Server certificate: * subject: C=ID * start date: Aug 2 04:54:26 2025 GMT * expire date: Aug 2 04:54:26 2026 GMT * issuer: C=ID * SSL certificate verify result: self-signed certificate (18), continuing anyway. * Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption * using HTTP/1.x \u003e HEAD / HTTP/1.1 \u003e Host: 99.99.99.98 \u003e User-Agent: curl/8.5.0 \u003e Accept: */* \u003e * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4): * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4): * old SSL session ID is stale, removing \u003c HTTP/1.1 200 OK HTTP/1.1 200 OK \u003c Server: nginx/1.24.0 (Ubuntu) Server: nginx/1.24.0 (Ubuntu) \u003c Date: Sun, 03 Aug 2025 10:18:33 GMT Date: Sun, 03 Aug 2025 10:18:33 GMT \u003c Content-Type: application/octet-stream Content-Type: application/octet-stream \u003c Content-Length: 25 Content-Length: 25 \u003c Connection: keep-alive Connection: keep-alive \u003c * Connection #0 to host 99.99.99.98 left intact ubuntu@Client:~$ Di atas terlihat bahwa curl ke HTTPS hasilnya normal.\nGambar 2. Wireshark Client\rGambar 3. Wireshark Server\rPada Gambar 2 dan 3, terlihat MSS=1460 dari client maupun dari server ketika melakukan TCP handshake.\nArtinya MTU pada kondisi ini sama, yaitu 1500 bytes. Kemudian perhatikan item nomor 40 pada Gambar 2. Packet sebesar 1404 bytes dikirimkan oleh HTTPS server ke client. 1404 bytes lebih kecil dari 1500 bytes, sehingga tidak ada kendala pada kondisi ini.\nSimulasi 2. MTU diperkecil pada Router-ISP-B Pada simulasi ini, MTU pada Router yang dilewati oleh HTTPS server ke client akan kita set menjadi 1300. Lalu kita coba curl lagi dari sisi client.\nubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure\rubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure * Trying 99.99.99.98:443... * Connected to 99.99.99.98 (99.99.99.98) port 443 * ALPN: curl offers h2,http/1.1 * TLSv1.3 (OUT), TLS handshake, Client hello (1): * TLSv1.3 (IN), TLS handshake, Server hello (2): * TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8): * TLSv1.3 (IN), TLS handshake, Certificate (11): * TLSv1.3 (IN), TLS handshake, CERT verify (15): * TLSv1.3 (IN), TLS handshake, Finished (20): * TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1): * TLSv1.3 (OUT), TLS handshake, Finished (20): * SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS * ALPN: server accepted http/1.1 * Server certificate: * subject: C=ID * start date: Aug 2 04:54:26 2025 GMT * expire date: Aug 2 04:54:26 2026 GMT * issuer: C=ID * SSL certificate verify result: self-signed certificate (18), continuing anyway. * Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption * using HTTP/1.x \u003e HEAD / HTTP/1.1 \u003e Host: 99.99.99.98 \u003e User-Agent: curl/8.5.0 \u003e Accept: */* \u003e * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4): * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4): * old SSL session ID is stale, removing \u003c HTTP/1.1 200 OK HTTP/1.1 200 OK \u003c Server: nginx/1.24.0 (Ubuntu) Server: nginx/1.24.0 (Ubuntu) \u003c Date: Sun, 03 Aug 2025 10:51:35 GMT Date: Sun, 03 Aug 2025 10:51:35 GMT \u003c Content-Type: application/octet-stream Content-Type: application/octet-stream \u003c Content-Length: 25 Content-Length: 25 \u003c Connection: keep-alive Connection: keep-alive \u003c * Connection #0 to host 99.99.99.98 left intact Terlihat curl ke HTTPS server masih normal. Tapi proses apa yang berubah ketika MTU pada Router yang dilewati packet diset lebih kecil?\nGambar 4. Wireshark Client\rGambar 5. Wireshark Server\rPerhatikan item no 142 pada Gambar 4. MSS server yang diterima oleh client masih 1460, padahal Router yang dilewati packet dari server sudah diset ke 1300. Kemungkinan di sini PMTUD belum terjadi. Tapi perhatikan item no 97-99 pada Gambar 5. Item 97 menunjukkan bahwa Router dengan IP 50.0.0.1 (Router-ISP-B) mengirim pesan ICMP “Fragmentation Needed” ke IP 99.99.99.98 (HTTPS server). Di sinilah PMTUD terjadi. Ini karena pada item no 96 server mengirim data sebesar 1404 melewati Router-ISP-B, padahal interface pada Router tersebut MTU-nya hanya 1300. Kemudian pada item no 98-99, server mentransmit ulang packet TCP masing-masing sebesar 1314 dan 156 bytes. 1314 lebih besar 14 bytes dibanding 1300, namun hal ini normal (overhead).\nKesimpulannya, koneksi antar client dan server masih bisa berjalan lancar karena PMTUD.\nSimulasi 3. ICMP HTTPS Server Dimatikan Pada simulasi ini kita akan mematikan ICMP pada Router HTTPS server sehingga PMTUD tidak dapat berfungsi. Lalu dengan MTU yang masih 1300 di Router-ISP-B, kita akan melakukan curl dari client ke server.\nubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure\rubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure * Trying 99.99.99.98:443... * Connected to 99.99.99.98 (99.99.99.98) port 443 * ALPN: curl offers h2,http/1.1 * TLSv1.3 (OUT), TLS handshake, Client hello (1): * Recv failure: Connection reset by peer * OpenSSL SSL_connect: Connection reset by peer in connection to 99.99.99.98:443 * Closing connection curl: (35) Recv failure: Connection reset by peer ubuntu@Client:~$ Terlihat curl gagal dilakukan dan nyangkut ketika melakukan TLS 1.3 Handshake.\nGambar 6. Wireshark Client\rGambar 7. Wireshark Server\rPerhatikan item nomor 3108 dan 3109 pada Gambar 6. Client menunggu data yang tak kunjung datang dari server selama 60 detik sebelum akhirnya koneksi direset oleh server. Sekarang perhatikan item 1031-1075 pada Gambar 7. Server berulang kali mencoba mentransmit packet TCP yang sama sebesar 1404 bytes ke arah server. Ini karena server tidak mendapat respon ACK dari client sehingga packet tersebut terus ditransmit ulang sebelum akhirnya koneksi di-reset. Yang terjadi adalah packet tersebut di-drop oleh Router-ISP-B, dan Router tersebut juga sebenarnya sudah mengirimkan pesan ICMP ke server agar server menurunkan ukuran packet yang dia kirim. Akan tetapi karena ICMP server mati, maka server tidak bisa menerima informasi tersebut (PMTUD tidak bisa terjadi).\nPenutup Dari sisi server mungkin ICMP dimatikan sebagai langkah keamanan. Akan tetapi dari pada menutup ICMP secara keseluruhan, alangkah lebih baik jika protocol ICMP yang berkaitan dengan PMTUD tetap dinyalakan untuk menghindari masalah MTU.\nSolusi terbaik dari sisi client yang bisa saya pikirkan adalah dengan mengganti EoIP menjadi GRE Tunnel. Karena MTU GRE Tunnel adalah 1476, sedangkan EoIP 1458. Lalu membuat rule TCP Clamping pada Router untuk menyamakan nilai MTU baik untuk trafik yang keluar maupun yang masuk.\n","wordCount":"1940","inLanguage":"en","image":"http://localhost:1313/cover.png","datePublished":"2025-08-03T10:56:21+07:00","dateModified":"2025-08-03T10:56:21+07:00","author":[{"@type":"Person","name":"Ilham Wahayu Yanre"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/network/studi-kasus-mtu/"},"publisher":{"@type":"Organization","name":"Ter-noted","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Ter-noted (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Ter-noted</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/archives title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/network/>Network</a></div><h1 class="post-title entry-hint-parent">Studi Kasus MTU</h1><div class=post-meta><span title='2025-08-03 10:56:21 +0700 +07'>3 August, 2025</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;1940 words&nbsp;·&nbsp;Ilham Wahayu Yanre&nbsp;|&nbsp;<a href=https://github.com/ternoted/ternoted.github.io/tree/main/content/posts/network/studi-kasus-mtu/index.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager srcset='http://localhost:1313/posts/network/studi-kasus-mtu/cover_hu_866c7171f49506.png 360w,http://localhost:1313/posts/network/studi-kasus-mtu/cover_hu_ef8c647d65f137bf.png 480w,http://localhost:1313/posts/network/studi-kasus-mtu/cover_hu_1df134bcb29a5f7b.png 720w,http://localhost:1313/posts/network/studi-kasus-mtu/cover.png 1024w' src=http://localhost:1313/posts/network/studi-kasus-mtu/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1024 height=679 alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#tldr>TL;DR</a></li><li><a href=#apa-itu-mtu-maximum-transmission-unit-dan-mss-maximum-segment-size>Apa itu MTU (Maximum Transmission Unit) dan MSS (Maximum Segment Size)?</a></li><li><a href=#apa-itu-pmtud-path-mtu-discovery>Apa itu PMTUD (Path MTU Discovery)?</a></li><li><a href=#simulasi-gns3>Simulasi GNS3</a><ul><li><a href=#simulasi-1-keadaan-normal>Simulasi 1. Keadaan Normal</a></li><li><a href=#simulasi-2-mtu-diperkecil-pada-router-isp-b>Simulasi 2. MTU diperkecil pada Router-ISP-B</a></li><li><a href=#simulasi-3-icmp-https-server-dimatikan>Simulasi 3. ICMP HTTPS Server Dimatikan</a></li></ul></li><li><a href=#penutup>Penutup</a></li></ul></nav></div></details></div><div class=post-content><p>Pernah mengalami kendala jaringan di mana koneksi client ke HTTPS server &ldquo;nyangkut&rdquo; secara random, padahal HTTP normal, firewall blocking tidak ada, port checking juga aman? Bisa jadi masalahnya ada pada MTU.</p><p>Beberapa waktu lalu saya dihadapkan dengan isu jaringan yang belum pernah saya temui sebelumnya. Di mana curl dari client ke server menggunakan HTTP aman, akan tetapi curl menggunakan HTTPS malah nyangkut lumayan lama sampai connection reset. Analisa saya, jika HTTP saja bisa, artinya tidak ada masalah pada layer 3 dong antara client dan server. Check port 80 dan 443 dari client ke server pun statusnya juga open, jadi layer 4 pun seharusnya juga aman kan? Akan tetapi ICMP server mati sehingga server tidak bisa di-probe. Selanjutnya saya coba curl HTTPS ke server menggunakan jaringan lain, ternyata bisa. Artinya masalah ini hanya terjadi di jaringan yang saya gunakan, bukan faktor server atau perangkat client.</p><p>Setelah mencari-cari jawaban di internet, saya menemukan solusi untuk menurunkan MTU pada perangkat client. Setelah menurunkan MTU dari 1500 (default) ke 1400 pada perangkat client, curl HTTPS ke server pun langsung bisa. Permasalahan teratasi, namun rasa penasaran saya makin menjadi-jadi.</p><p>Setelah menganalisa lebih lanjut, Alhamdulillah akhirnya saya berhasil memahami teknis permasalahan tersebut.</p><h2 id=tldr>TL;DR<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><blockquote><ul><li>Masalah ini terjadi karena ada perbedaan nilai MTU dari jalur yang dilewati trafik antara client-server, ICMP pada server mati sehingga PMTUD tidak berfungsi, dan jalur trafik antar client-server yang asimetris.</li></ul></blockquote><p>Jaringan client memiliki beberapa koneksi BGP ke upstream yang berbeda-beda. Trafik dari client ke server melewati BGP A, akan tetapi kembali lewat BGP B. BGP B terhubung ke upstream menggunakan EoIP. MTU dari EoIP adalah 1458, karena 42 bytes dipakai untuk EoIP encapsulation. Jadi ketika client-server melakukan TCP handshake, maka MSS client yang diterima server adalah 1460 karena melewati BGP A, sedangkan MSS server yang diterima client adalah 1418 karena dipangkas oleh EoIP interface BGP B. Karena MSS client yang diterima server adalah 1460, maka server akan mengirim data dengan MSS 1460 juga. Padahal data dengan MSS 1460 tidak bisa melewati jalur BGP B yang MTU-nya hanya 1458. Lalu karena ICMP server dimatikan, Router BGP B pun tidak bisa memberi tahu server menggunakan PMTUD bahwa ukuran data yang dia kirim harus disesuaikan dengan MTU si Router, protocol yang memanfaatkan ICMP. Jadi ketika server mengirimkan data dengan MSS 1460, maka data ini akan di-drop oleh Router BGP B sehingga koneksinya akan &ldquo;nyangkut&rdquo;. Makanya ketika MTU client diturunkan menjadi 1400, koneksi client-server kembali normal. Karena MSS client yang dikirim ke server juga akan lebih kecil.</p><p>Sebelum kita mereplikasi kasus tersebut menggunakan GNS3, mari kita jelaskan terlebih dahulu istilah MTU, MSS, PMTUD yang kita singgung di atas.</p><h2 id=apa-itu-mtu-maximum-transmission-unit-dan-mss-maximum-segment-size>Apa itu MTU (Maximum Transmission Unit) dan MSS (Maximum Segment Size)?<a hidden class=anchor aria-hidden=true href=#apa-itu-mtu-maximum-transmission-unit-dan-mss-maximum-segment-size>#</a></h2><p>MTU adalah jumlah maksimum data dalam bentuk bytes yang bisa ditransmisikan dalam 1 packet, yang default-nya adalah 1500 bytes. Dalam packet terdapat IP Header, TCP Header, dan payload. Jika data ini melebihi ukuran MTU, maka akan terjadi IP fragmentation apabila flag DF=0. Artinya data tersebut akan dibagi menjadi beberapa packet. Tapi jika flag DF=1, artinya packet tersebut tidak boleh difragmentasi sehingga packet tersebut akan di drop dan pengirim akan menerima pesan ICMP Fragmentation needed. Lalu pengirim akan mengirim ulang packet tersebut dengan ukuran yang disesuaikan.</p><p>Di dalam packet terdapat IP Header, TCP Header, dan payload. Ukuran maksimum payload inilah yang disebut dengan MSS. Jadi packet dengan ukuran 1500 bytes terdiri dari 20 bytes IP Header + 20 bytes TCP Header + 1460 payload. MSS ini akan saling diinformasikan oleh client-server ketika melakukan TCP handshake. Makanya EoIP interface dengan MTU 1458 hanya bisa dilewati oleh packet dengan MSS 1418, karena 40 bytes nya adalah IP Header dan TCP Header.</p><h2 id=apa-itu-pmtud-path-mtu-discovery>Apa itu PMTUD (Path MTU Discovery)?<a hidden class=anchor aria-hidden=true href=#apa-itu-pmtud-path-mtu-discovery>#</a></h2><p>PMTUD adalah mekanisme yang digunakan pengirim data (client atau server) untuk mengetahui nilai MTU terkecil pada router atau perangkat layer 3 yang akan dilewatinya untuk mencapai tujuan. Tujuannya agar pengirim bisa menyesuaikan ukuran packet yang akan dikeluarkannya agar &ldquo;muat&rdquo; ketika melewati jalur ke tujuannya. Tujuan lainnya adalah agar tidak terjadi IP fragmentation. Secara default IP fragmentation tidak diizinkan (DF=1) karena IP fragmentation sangat membebani performa jaringan. PMTUD memanfaatkan ICMP. Jadi jika ICMP dimatikan, maka PMTUD juga ikut mati.</p><blockquote><p><details><summary markdown=span><strong>Contoh Use Case PMTUD</strong></summary><p>Client mengirim packet ke Server melewati Router A,B,C dengan ukuran 1500 bytes, dan flag DF=1. Router C memiliki MTU 1400. Ketika packet sampai ke Router C, Router C akan men-drop packet tersebut dan mengirim pesan ICMP &ldquo;Fragmentation Needed&rdquo; ke client yang memuat informasi MTU pada Router tersebut. Client menerima pesan ICMP tersebut dan mengirim ulang packet dengan menyesuaikan ukurannya dengan MTU Router C.</p><p>Apabila Client mengirim packet sebesar 1500 bytes dengan DF=0, lalu packet melewati Router C. Maka Router C akan memfragmentasi packet tersebut tanpa memberitahu pengirim.</p></details></p></blockquote><h2 id=simulasi-gns3>Simulasi GNS3<a hidden class=anchor aria-hidden=true href=#simulasi-gns3>#</a></h2><blockquote><ul><li>Topologi didesain agar trafik antara Client dan Server selalu melewati jalur yang berbeda (asimetris)</li><li>Client dan server menggunakan cloud-ubuntu-24.04</li><li>IP client 10.0.0.2, IP server 99.99.99.98</li><li>Server dibuat menjadi HTTPS server untuk mensimulasikan curl dari client</li><li>Router menggunakan Mikrotik CHR 7.19.4</li><li>Fokus dari pembahasan ini adalah behavior dari MTU. Jadi untuk konfigurasi setupnya tidak dibahas di sini.</li><li>Trafik pada interface client dan server akan dimonitor menggunakan wireshark</li></ul></blockquote><blockquote><p><details><summary markdown=span><strong>Gambar 1. Topologi</strong></summary><img alt="Alt text" loading=lazy src=topologi.png title=Topologi></details></p></blockquote><h3 id=simulasi-1-keadaan-normal>Simulasi 1. Keadaan Normal<a hidden class=anchor aria-hidden=true href=#simulasi-1-keadaan-normal>#</a></h3><p>Pada simulasi pertama kita akan mencoba melakukan curl ke HTTPS server dari client. Kemudian kita akan memantau melalui wireshark apa saja yang terjadi ketika kita melakukan curl.</p><blockquote><p><details><summary markdown=span><code>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure</code></summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure
</span></span><span class=line><span class=cl>*   Trying 99.99.99.98:443...
</span></span><span class=line><span class=cl>* Connected to 99.99.99.98 <span class=o>(</span>99.99.99.98<span class=o>)</span> port <span class=m>443</span>
</span></span><span class=line><span class=cl>* ALPN: curl offers h2,http/1.1
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Client hello <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Server hello <span class=o>(</span>2<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Encrypted Extensions <span class=o>(</span>8<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Certificate <span class=o>(</span>11<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, CERT verify <span class=o>(</span>15<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS change cipher, Change cipher spec <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=cl>* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS
</span></span><span class=line><span class=cl>* ALPN: server accepted http/1.1
</span></span><span class=line><span class=cl>* Server certificate:
</span></span><span class=line><span class=cl>*  subject: <span class=nv>C</span><span class=o>=</span>ID
</span></span><span class=line><span class=cl>*  start date: Aug  <span class=m>2</span> 04:54:26 <span class=m>2025</span> GMT
</span></span><span class=line><span class=cl>*  expire date: Aug  <span class=m>2</span> 04:54:26 <span class=m>2026</span> GMT
</span></span><span class=line><span class=cl>*  issuer: <span class=nv>C</span><span class=o>=</span>ID
</span></span><span class=line><span class=cl>*  SSL certificate verify result: self-signed certificate <span class=o>(</span>18<span class=o>)</span>, continuing anyway.
</span></span><span class=line><span class=cl>*   Certificate level 0: Public key <span class=nb>type</span> RSA <span class=o>(</span>2048/112 Bits/secBits<span class=o>)</span>, signed using sha256WithRSAEncryption
</span></span><span class=line><span class=cl>* using HTTP/1.x
</span></span><span class=line><span class=cl>&gt; HEAD / HTTP/1.1
</span></span><span class=line><span class=cl>&gt; Host: 99.99.99.98
</span></span><span class=line><span class=cl>&gt; User-Agent: curl/8.5.0
</span></span><span class=line><span class=cl>&gt; Accept: */*
</span></span><span class=line><span class=cl>&gt;
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Newsession Ticket <span class=o>(</span>4<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Newsession Ticket <span class=o>(</span>4<span class=o>)</span>:
</span></span><span class=line><span class=cl>* old SSL session ID is stale, removing
</span></span><span class=line><span class=cl>&lt; HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>&lt; Server: nginx/1.24.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl>Server: nginx/1.24.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl>&lt; Date: Sun, <span class=m>03</span> Aug <span class=m>2025</span> 10:18:33 GMT
</span></span><span class=line><span class=cl>Date: Sun, <span class=m>03</span> Aug <span class=m>2025</span> 10:18:33 GMT
</span></span><span class=line><span class=cl>&lt; Content-Type: application/octet-stream
</span></span><span class=line><span class=cl>Content-Type: application/octet-stream
</span></span><span class=line><span class=cl>&lt; Content-Length: <span class=m>25</span>
</span></span><span class=line><span class=cl>Content-Length: <span class=m>25</span>
</span></span><span class=line><span class=cl>&lt; Connection: keep-alive
</span></span><span class=line><span class=cl>Connection: keep-alive
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;
</span></span><span class=line><span class=cl>* Connection <span class=c1>#0 to host 99.99.99.98 left intact</span>
</span></span><span class=line><span class=cl>ubuntu@Client:~$
</span></span></code></pre></div></details></p></blockquote><p>Di atas terlihat bahwa curl ke HTTPS hasilnya normal.</p><blockquote><p><p><details><summary markdown=span><strong>Gambar 2. Wireshark Client</strong></summary><img alt="Alt text" loading=lazy src=1wireshark_client.png title=Topologi></details></p><p><details><summary markdown=span><strong>Gambar 3. Wireshark Server</strong></summary><img alt="Alt text" loading=lazy src=2wireshark_client.png title=Topologi></details></p></p></blockquote><p>Pada Gambar 2 dan 3, terlihat MSS=1460 dari client maupun dari server ketika melakukan TCP handshake.</p><p>Artinya MTU pada kondisi ini sama, yaitu 1500 bytes. Kemudian perhatikan item nomor 40 pada Gambar 2. Packet sebesar 1404 bytes dikirimkan oleh HTTPS server ke client. 1404 bytes lebih kecil dari 1500 bytes, sehingga tidak ada kendala pada kondisi ini.</p><h3 id=simulasi-2-mtu-diperkecil-pada-router-isp-b>Simulasi 2. MTU diperkecil pada Router-ISP-B<a hidden class=anchor aria-hidden=true href=#simulasi-2-mtu-diperkecil-pada-router-isp-b>#</a></h3><p>Pada simulasi ini, MTU pada Router yang dilewati oleh HTTPS server ke client akan kita set menjadi 1300. Lalu kita coba curl lagi dari sisi client.</p><blockquote><p><details><summary markdown=span><code>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure</code></summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure
</span></span><span class=line><span class=cl>*   Trying 99.99.99.98:443...
</span></span><span class=line><span class=cl>* Connected to 99.99.99.98 <span class=o>(</span>99.99.99.98<span class=o>)</span> port <span class=m>443</span>
</span></span><span class=line><span class=cl>* ALPN: curl offers h2,http/1.1
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Client hello <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Server hello <span class=o>(</span>2<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Encrypted Extensions <span class=o>(</span>8<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Certificate <span class=o>(</span>11<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, CERT verify <span class=o>(</span>15<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS change cipher, Change cipher spec <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=cl>* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS
</span></span><span class=line><span class=cl>* ALPN: server accepted http/1.1
</span></span><span class=line><span class=cl>* Server certificate:
</span></span><span class=line><span class=cl>*  subject: <span class=nv>C</span><span class=o>=</span>ID
</span></span><span class=line><span class=cl>*  start date: Aug  <span class=m>2</span> 04:54:26 <span class=m>2025</span> GMT
</span></span><span class=line><span class=cl>*  expire date: Aug  <span class=m>2</span> 04:54:26 <span class=m>2026</span> GMT
</span></span><span class=line><span class=cl>*  issuer: <span class=nv>C</span><span class=o>=</span>ID
</span></span><span class=line><span class=cl>*  SSL certificate verify result: self-signed certificate <span class=o>(</span>18<span class=o>)</span>, continuing anyway.
</span></span><span class=line><span class=cl>*   Certificate level 0: Public key <span class=nb>type</span> RSA <span class=o>(</span>2048/112 Bits/secBits<span class=o>)</span>, signed using sha256WithRSAEncryption
</span></span><span class=line><span class=cl>* using HTTP/1.x
</span></span><span class=line><span class=cl>&gt; HEAD / HTTP/1.1
</span></span><span class=line><span class=cl>&gt; Host: 99.99.99.98
</span></span><span class=line><span class=cl>&gt; User-Agent: curl/8.5.0
</span></span><span class=line><span class=cl>&gt; Accept: */*
</span></span><span class=line><span class=cl>&gt;
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Newsession Ticket <span class=o>(</span>4<span class=o>)</span>:
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Newsession Ticket <span class=o>(</span>4<span class=o>)</span>:
</span></span><span class=line><span class=cl>* old SSL session ID is stale, removing
</span></span><span class=line><span class=cl>&lt; HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>&lt; Server: nginx/1.24.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl>Server: nginx/1.24.0 <span class=o>(</span>Ubuntu<span class=o>)</span>
</span></span><span class=line><span class=cl>&lt; Date: Sun, <span class=m>03</span> Aug <span class=m>2025</span> 10:51:35 GMT
</span></span><span class=line><span class=cl>Date: Sun, <span class=m>03</span> Aug <span class=m>2025</span> 10:51:35 GMT
</span></span><span class=line><span class=cl>&lt; Content-Type: application/octet-stream
</span></span><span class=line><span class=cl>Content-Type: application/octet-stream
</span></span><span class=line><span class=cl>&lt; Content-Length: <span class=m>25</span>
</span></span><span class=line><span class=cl>Content-Length: <span class=m>25</span>
</span></span><span class=line><span class=cl>&lt; Connection: keep-alive
</span></span><span class=line><span class=cl>Connection: keep-alive
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;
</span></span><span class=line><span class=cl>* Connection <span class=c1>#0 to host 99.99.99.98 left intact</span>
</span></span></code></pre></div></details></p></blockquote><p>Terlihat curl ke HTTPS server masih normal. Tapi proses apa yang berubah ketika MTU pada Router yang dilewati packet diset lebih kecil?</p><blockquote><p><p><details><summary markdown=span><strong>Gambar 4. Wireshark Client</strong></summary><img alt="Alt text" loading=lazy src=2wireshark_client.png title=Topologi></details></p><p><details><summary markdown=span><strong>Gambar 5. Wireshark Server</strong></summary><img alt="Alt text" loading=lazy src=2wireshark_server.png title=Topologi></details></p></p></blockquote><p>Perhatikan item no 142 pada Gambar 4. MSS server yang diterima oleh client masih 1460, padahal Router yang dilewati packet dari server sudah diset ke 1300. Kemungkinan di sini PMTUD belum terjadi. Tapi perhatikan item no 97-99 pada Gambar 5. Item 97 menunjukkan bahwa Router dengan IP 50.0.0.1 (Router-ISP-B) mengirim pesan ICMP &ldquo;Fragmentation Needed&rdquo; ke IP 99.99.99.98 (HTTPS server). Di sinilah PMTUD terjadi. Ini karena pada item no 96 server mengirim data sebesar 1404 melewati Router-ISP-B, padahal interface pada Router tersebut MTU-nya hanya 1300. Kemudian pada item no 98-99, server mentransmit ulang packet TCP masing-masing sebesar 1314 dan 156 bytes. 1314 lebih besar 14 bytes dibanding 1300, namun hal ini normal (overhead).</p><p>Kesimpulannya, koneksi antar client dan server masih bisa berjalan lancar karena PMTUD.</p><h3 id=simulasi-3-icmp-https-server-dimatikan>Simulasi 3. ICMP HTTPS Server Dimatikan<a hidden class=anchor aria-hidden=true href=#simulasi-3-icmp-https-server-dimatikan>#</a></h3><p>Pada simulasi ini kita akan mematikan ICMP pada Router HTTPS server sehingga PMTUD tidak dapat berfungsi. Lalu dengan MTU yang masih 1300 di Router-ISP-B, kita akan melakukan curl dari client ke server.</p><blockquote><p><details><summary markdown=span><code>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure</code></summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ubuntu@Client:~$ curl -Iv https://99.99.99.98 --insecure
</span></span><span class=line><span class=cl>*   Trying 99.99.99.98:443...
</span></span><span class=line><span class=cl>* Connected to 99.99.99.98 <span class=o>(</span>99.99.99.98<span class=o>)</span> port <span class=m>443</span>
</span></span><span class=line><span class=cl>* ALPN: curl offers h2,http/1.1
</span></span><span class=line><span class=cl>* TLSv1.3 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Client hello <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=cl>* Recv failure: Connection reset by peer
</span></span><span class=line><span class=cl>* OpenSSL SSL_connect: Connection reset by peer in connection to 99.99.99.98:443
</span></span><span class=line><span class=cl>* Closing connection
</span></span><span class=line><span class=cl>curl: <span class=o>(</span>35<span class=o>)</span> Recv failure: Connection reset by peer
</span></span><span class=line><span class=cl>ubuntu@Client:~$
</span></span></code></pre></div></details></p></blockquote><p>Terlihat curl gagal dilakukan dan nyangkut ketika melakukan TLS 1.3 Handshake.</p><blockquote><p><p><details><summary markdown=span><strong>Gambar 6. Wireshark Client</strong></summary><img alt="Alt text" loading=lazy src=3wireshark_client.png title=Topologi></details></p><p><details><summary markdown=span><strong>Gambar 7. Wireshark Server</strong></summary><img alt="Alt text" loading=lazy src=3wireshark_server.png title=Topologi></details></p></p></blockquote><p>Perhatikan item nomor 3108 dan 3109 pada Gambar 6. Client menunggu data yang tak kunjung datang dari server selama 60 detik sebelum akhirnya koneksi direset oleh server. Sekarang perhatikan item 1031-1075 pada Gambar 7. Server berulang kali mencoba mentransmit packet TCP yang sama sebesar 1404 bytes ke arah server. Ini karena server tidak mendapat respon ACK dari client sehingga packet tersebut terus ditransmit ulang sebelum akhirnya koneksi di-reset. Yang terjadi adalah packet tersebut di-drop oleh Router-ISP-B, dan Router tersebut juga sebenarnya sudah mengirimkan pesan ICMP ke server agar server menurunkan ukuran packet yang dia kirim. Akan tetapi karena ICMP server mati, maka server tidak bisa menerima informasi tersebut (PMTUD tidak bisa terjadi).</p><h2 id=penutup>Penutup<a hidden class=anchor aria-hidden=true href=#penutup>#</a></h2><p>Dari sisi server mungkin ICMP dimatikan sebagai langkah keamanan. Akan tetapi dari pada menutup ICMP secara keseluruhan, alangkah lebih baik jika protocol ICMP yang berkaitan dengan PMTUD tetap dinyalakan untuk menghindari masalah MTU.</p><p>Solusi terbaik dari sisi client yang bisa saya pikirkan adalah dengan mengganti EoIP menjadi GRE Tunnel. Karena MTU GRE Tunnel adalah 1476, sedangkan EoIP 1458. Lalu membuat rule TCP Clamping pada Router untuk menyamakan nilai MTU baik untuk trafik yang keluar maupun yang masuk.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/network/cara-kerja-traceroute/><span class=title>« Prev</span><br><span>Cara Kerja Traceroute</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on x" href="https://x.com/intent/tweet/?text=Studi%20Kasus%20MTU&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f&amp;title=Studi%20Kasus%20MTU&amp;summary=Studi%20Kasus%20MTU&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f&title=Studi%20Kasus%20MTU"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on whatsapp" href="https://api.whatsapp.com/send?text=Studi%20Kasus%20MTU%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on telegram" href="https://telegram.me/share/url?text=Studi%20Kasus%20MTU&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Studi Kasus MTU on ycombinator" href="https://news.ycombinator.com/submitlink?t=Studi%20Kasus%20MTU&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fnetwork%2fstudi-kasus-mtu%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Ter-noted</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>